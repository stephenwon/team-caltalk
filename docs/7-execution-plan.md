# Team CalTalk 실행 계획서

**문서 버전**: 4.0
**최종 업데이트**: 2025-10-14
**작성자**: Architecture & Planning Team

---

## 📋 프로젝트 개요

Team CalTalk는 **5일 MVP 개발 목표**를 가진 팀 중심의 일정 관리와 실시간 커뮤니케이션을 통합한 협업 플랫폼입니다.

### 🎯 핵심 목표

- **개발 기간**: 5일 MVP 완성
- **성능 목표**: 3,000개 팀 동시 지원 (30,000명)
- **기술 스택**: React 18 + Node.js + Express + PostgreSQL
- **핵심 기능**: 인증, 팀 관리, 일정 관리, 실시간 채팅

---

## 🚀 11단계 실행 계획 및 검수 리스트

### 1단계: 데이터베이스 환경 구성

#### 📌 실행 계획

- PostgreSQL 17.6 설치 및 최적화
- 6개 핵심 테이블 생성 (users, teams, team_members, schedules, schedule_participants, messages)
- 21개 인덱스 생성 (GIST 인덱스 포함)
- 3개 함수, 3개 트리거, 2개 뷰 생성
- 성능 파라미터 설정 (shared_buffers=512MB, work_mem=8MB, max_connections=300)
- 테스트 데이터 삽입

#### ✅ 검수 리스트

- [x] PostgreSQL 설치 및 서비스 정상 작동 확인
- [x] 6개 핵심 테이블 생성 확인
- [x] GIST 인덱스(일정 충돌 감지용) 정상 작동 확인
- [x] 테스트 데이터 삽입 및 데이터 무결성 확인
- [x] 데이터베이스 백업 및 복구 테스트

---

### 2단계: 백엔드 기반 구조 및 인증 시스템

#### 📌 실행 계획

- JWT 기반 인증/인가 시스템 구현
  - 회원가입/로그인/로그아웃
  - 토큰 갱신 및 검증
  - 비밀번호 변경
- Clean Architecture 기반 계층 분리
  - 7개 라우터 파일 (auth, teams, schedules, chat, poll, activities, users)
  - 4개 모델 (User, Team, Schedule, Message)
  - 2개 서비스 (AuthService, EventService)
  - 3개 미들웨어 (auth, security, validation)
- 보안 설정 (helmet, cors, rate-limiting, XSS 방지, SQL injection 방지)

#### ✅ 검수 리스트

- [ ] 회원가입/로그인/로그아웃 API 정상 작동 확인
- [ ] JWT 토큰 발급 및 검증 확인
- [ ] 비밀번호 암호화 및 변경 기능 확인
- [ ] 4개 모델 클래스 데이터베이스 연동 확인
- [ ] helmet, CORS, Rate Limiting 보안 설정 확인
- [ ] XSS, SQL Injection 방지 확인
- [ ] 환경 변수 설정 및 로깅 시스템 확인

---

### 3단계: 팀 관리 API

#### 📌 실행 계획

- 팀 CRUD API 구현 (생성, 조회, 수정, 삭제)
- 초대 코드 시스템 구현 (자동 생성 및 재생성)
- 팀원 관리 기능 (참여, 탈퇴, 멤버 목록, 제거)
- 팀장/팀원 역할 기반 권한 제어
- 팀 간 데이터 격리

#### ✅ 검수 리스트

- [ ] 팀 생성/조회/수정/삭제 API 정상 작동 확인
- [ ] 초대 코드 자동 생성 및 팀 참여 기능 확인
- [ ] 팀원 목록 조회 및 제거 기능 확인
- [ ] 팀장/팀원 역할 기반 권한 제어 확인
- [ ] 팀 간 데이터 격리 확인

---

### 4단계: 일정 관리 API

#### 📌 실행 계획

- 일정 CRUD API 구현 (생성, 조회, 수정, 삭제)
- PostgreSQL GIST 인덱스를 활용한 일정 충돌 감지
- 참가자 관리 시스템 (추가, 제거, 응답 상태 관리)
- 날짜별 조회 필터링 (월/주/일 단위)
- 팀장/팀원 권한 기반 접근 제어

#### ✅ 검수 리스트

- [ ] 일정 생성/조회/수정/삭제 API 정상 작동 확인
- [ ] 개인 일정 및 팀 일정 생성 확인
- [ ] GIST 인덱스 활용한 일정 충돌 감지 확인
- [ ] 참가자 관리 및 응답 상태 관리 확인
- [ ] 날짜별 조회 필터링 (월/주/일) 확인
- [ ] 팀장/팀원 권한 기반 접근 제어 확인
- [ ] 일정 조회 성능 테스트 (< 2초)

---

### 5단계: 실시간 채팅 시스템

#### 📌 실행 계획

- 날짜별 채팅방 분리 구현
- Long Polling 기반 실시간 메시지 동기화 (30초 타임아웃)
- 메시지 타입 처리 (normal, schedule_request, schedule_approved, schedule_rejected)
- 메시지 읽음 상태 추적 시스템
- 일정 변경 요청 워크플로우 구현
  - 팀원의 일정 변경 요청 생성
  - 팀장의 요청 승인/거절
  - 자동 알림 메시지 생성

#### ✅ 검수 리스트

- [ ] 메시지 전송/삭제 API 정상 작동 확인
- [ ] 날짜별 채팅 공간 분리 확인
- [ ] Long Polling 연결 및 실시간 동기화 확인
- [ ] 메시지 타입(normal, schedule_request 등) 처리 확인
- [ ] 일정 변경 요청 워크플로우 확인
- [ ] 팀장의 요청 승인/거절 기능 확인
- [ ] 메시지 읽음 처리 및 읽지 않은 메시지 수 조회 확인
- [ ] 메시지 전송 성능 테스트 (< 1초)

---

### 6단계: 프론트엔드 기반 구조

#### 📌 실행 계획

- React 18 + TypeScript + Vite 5.4 프로젝트 생성
- Zustand 전역 상태 관리 (auth, team, chat)
- TanStack Query 서버 상태 캐싱
- React Router 라우팅 및 보호된 라우트 구현
- Tailwind CSS + shadcn/ui UI 프레임워크 설정
- API 서비스 레이어 구현
- 폴더 구조 생성
  - components/ (ui, calendar, chat, Layout)
  - pages/ (9개 페이지)
  - services/ (5개 API 서비스)
  - stores/ (3개 Zustand 스토어)
  - hooks/ (4개 커스텀 훅)

#### ✅ 검수 리스트

- [ ] React + TypeScript 프로젝트 생성 및 실행 확인
- [ ] Vite 빌드 시스템 정상 작동 확인
- [ ] Zustand 스토어 3개 (auth, team, chat) 생성 확인
- [ ] TanStack Query 서버 상태 캐싱 확인
- [ ] React Router 설정 및 보호된 라우트 확인
- [ ] Tailwind CSS + shadcn/ui 설정 확인
- [ ] API 서비스 레이어 구현 확인
- [ ] 프로덕션 빌드 테스트

---

### 7단계: 사용자 인증 UI

#### 📌 실행 계획

- 로그인 페이지 구현 (폼 검증, 에러 처리)
- 회원가입 페이지 구현 (폼 검증, 자동 로그인)
- authStore를 통한 인증 상태 관리
- Zustand persist를 통한 localStorage 동기화
- 보호된 라우트 구현 (인증 가드)
- 자동 로그인 상태 복원 기능

#### ✅ 검수 리스트

- [ ] 로그인/회원가입 페이지 구현 확인
- [ ] 폼 검증 및 API 호출 확인
- [ ] JWT 토큰 저장 및 authStore 상태 관리 확인
- [ ] 로그인 성공 시 리다이렉트 확인
- [ ] 보호된 라우트 접근 제어 확인
- [ ] 자동 로그인 상태 복원 확인
- [ ] 에러 처리 및 메시지 표시 확인

---

### 8단계: 팀 관리 UI

#### 📌 실행 계획

- 팀 목록 페이지 구현 (카드 형태 표시)
- 팀 생성 페이지/모달 구현
- 팀 참여 페이지 구현 (초대 코드 입력 및 검증)
- 팀 상세 페이지 구현 (멤버 목록, 역할 표시)
- 팀 정보 수정/삭제 기능 (팀장 권한)
- 팀원 제거 및 초대 코드 재생성 기능 (팀장 권한)
- team-store를 통한 상태 관리

#### ✅ 검수 리스트

- [ ] 팀 목록/생성/참여 페이지 구현 확인
- [ ] 팀 생성 및 초대 코드 자동 생성 확인
- [ ] 초대 코드 입력 및 팀 참여 기능 확인
- [ ] 팀 상세 페이지 및 멤버 목록 표시 확인
- [ ] 팀 정보 수정/삭제 (팀장 권한) 확인
- [ ] 팀원 제거 및 초대 코드 재생성 (팀장 권한) 확인
- [ ] team-store 상태 관리 확인

---

### 9단계: 캘린더 UI

#### 📌 실행 계획

- 캘린더 그리드 컴포넌트 구현 (월간 뷰)
- 캘린더 헤더 컴포넌트 구현 (날짜 네비게이션)
- ScheduleCard 컴포넌트 구현 (개인/팀 일정 색상 구분)
- 일정 생성/수정 모달 구현 (폼 검증, 충돌 경고)
- 일정 상세 모달 구현 (참가자 목록, 삭제 확인)
- 자동 새로고침 기능 구현 (30초 간격 폴링)
- 팀장/팀원 권한 기반 접근 제어
- useSchedules 훅을 통한 데이터 캐싱

#### ✅ 검수 리스트

- [ ] 캘린더 그리드 및 월간 뷰 표시 확인
- [ ] 일정 목록 조회 및 개인/팀 일정 구분 표시 확인
- [ ] 일정 생성/수정 모달 구현 확인
- [ ] 일정 충돌 감지 및 경고 메시지 표시 확인
- [ ] 일정 상세 모달 및 참가자 목록 표시 확인
- [ ] 일정 삭제 기능 (권한 확인) 확인
- [ ] 자동 새로고침 (30초 간격) 기능 확인
- [ ] 팀장/팀원 권한 기반 접근 제어 확인
- [ ] useSchedules 훅 데이터 캐싱 확인

---

### 10단계: 채팅 UI

#### 📌 실행 계획

- 채팅방 페이지 구현 (날짜별 분리)
- MessageList 컴포넌트 구현 (발신자 구분, 시간 표시, 자동 스크롤)
- MessageInput 컴포넌트 구현 (500자 제한, Enter 전송)
- ConnectionStatus 컴포넌트 구현 (연결 상태 표시, 재연결 로직)
- ScheduleRequestMessage 컴포넌트 구현 (일정 변경 요청 메시지)
- 팀장용 승인/거절 버튼 구현
- Long Polling 연결 및 실시간 동기화
- 메시지 읽음 처리 및 읽지 않은 메시지 수 표시
- chat-store 및 useChat 훅을 통한 상태 관리

#### ✅ 검수 리스트

- [ ] 채팅방 페이지 구현 및 날짜별 분리 확인
- [ ] 메시지 표시 (발신자 구분, 시간 표시, 자동 스크롤) 확인
- [ ] 메시지 입력 (500자 제한, Enter 전송) 확인
- [ ] Long Polling 연결 및 실시간 동기화 확인
- [ ] ConnectionStatus 및 재연결 로직 확인
- [ ] 일정 변경 요청 메시지 표시 확인
- [ ] 팀장용 승인/거절 버튼 및 기능 확인
- [ ] 메시지 읽음 처리 및 읽지 않은 메시지 수 표시 확인
- [ ] chat-store 및 useChat 훅 상태 관리 확인

---

### 11단계: 대시보드

#### 📌 실행 계획

- 대시보드 페이지 구현
- 최근 활동 내역 API 구현 (backend)
- 최근 1개월 일정/메시지/팀 활동 표시
- 활동 타임라인 구현 (시간순 정렬, 활동 타입 아이콘)
- 빠른 접근 링크 (팀 목록, 캘린더)
- useActivities 훅 및 activity-service 구현

#### ✅ 검수 리스트

- [ ] 대시보드 페이지 구현 확인
- [ ] 최근 활동 내역 API (backend) 구현 확인
- [ ] 최근 1개월 일정/메시지/팀 활동 표시 확인
- [ ] 활동 타임라인 시간순 정렬 및 아이콘 표시 확인
- [ ] 빠른 접근 링크 (팀 목록, 캘린더) 확인
- [ ] useActivities 훅 및 activity-service 구현 확인

---

## 📋 성공 기준

### 🎯 기능적 요구사항

- 사용자 회원가입/로그인 완전 작동
- 팀 생성/참여 플로우 정상 작동
- 일정 CRUD 및 충돌 감지 정확도 100%
- 실시간 채팅 메시지 전달 지연 < 1초
- 권한 기반 접근 제어 (팀장/팀원 분리)
- 일정 변경 요청 워크플로우 완전 구현

### ⚡ 성능 요구사항

- 일정 조회: < 2초
- 메시지 전달: < 1초
- API 응답: < 100ms (일반), < 50ms (복잡 조인)
- 동시 접속: 최소 100명 (MVP), 목표 30,000명

### 🛡️ 안정성 요구사항

- 데이터 일관성: 100% (트랜잭션 보장)
- 팀 간 데이터 격리: 100%
- 인증 보안: JWT 토큰 적절한 만료 처리
- 입력 검증: XSS, SQL Injection 방지

---

## 🚀 배포 체크리스트

### 📋 필수 확인 사항

- [ ] 모든 환경 변수 설정 완료
- [ ] 데이터베이스 백업 및 복구 테스트
- [ ] 보안 검증 (SQL Injection, XSS 방지)
- [ ] 핵심 사용자 시나리오 E2E 테스트 통과
- [ ] 성능 요구사항 달성 확인
- [ ] 에러 처리 및 로깅 시스템 작동
- [ ] CORS 설정 (개발/프로덕션)
- [ ] Rate Limiting 적용

### 📝 문서화

- [ ] API 문서 (Swagger: `/api/docs`)
- [ ] 데이터베이스 스키마 문서
- [ ] 환경 설정 가이드 (`.env.example`)
- [ ] 프론트엔드-백엔드 통합 가이드
- [ ] 기술 스택 문서
- [ ] 실행 계획서 (본 문서)

---

## 🔧 기술 스택

### 백엔드

- **Runtime**: Node.js 24.7
- **Framework**: Express 4.19
- **Database**: PostgreSQL 17.6
- **Authentication**: JWT (jsonwebtoken 9.0), bcrypt 5.1
- **Validation**: joi 17.12
- **Logging**: winston 3.11
- **Security**: helmet, cors, express-rate-limit

### 프론트엔드

- **Framework**: React 18.2.0
- **Language**: TypeScript 5.0
- **Build Tool**: Vite 5.4
- **State Management**: Zustand 4.5, TanStack Query 5.28
- **UI**: Tailwind CSS 3.4, shadcn/ui
- **Routing**: React Router v6.22
- **Testing**: Vitest, Playwright

---

이 프로젝트는 협업 플랫폼의 핵심 기능을 모두 구현하는 것을 목표로 합니다. 🚀
