# Team CalTalk 비즈니스 도메인 정의서

## 1. 도메인 개요

**Team CalTalk**는 팀 중심의 일정 관리와 실시간 커뮤니케이션을 통합한 협업 플랫폼입니다. 팀 내 일정 충돌을 방지하고 일정 변경에 대한 원활한 소통을 지원합니다.

## 2. 핵심 도메인 모델

### 주요 엔티티

#### User (사용자)

- 속성: 사용자ID, 이름, 이메일, 권한
- 역할: 팀장(Team Leader) / 팀원(Team Member)

#### Team (팀)

- 속성: 팀ID, 팀명, 생성일
- 관계: 다수의 사용자 소속

#### Schedule (일정)

- 속성: 일정ID, 제목, 내용, 시작일시, 종료일시, 생성자, 참가자
- 유형: 팀 일정(공유), 개인 일정

#### Chat (채팅)

- 속성: 메시지ID, 내용, 발신자, 발신일시, 대상일자
- 관계: 특정 날짜에 연결된 대화 이력

## 3. 비즈니스 규칙

### 권한 관리

- **팀장 권한**: 팀 일정 CRUD(생성/조회/수정/삭제) 전체 권한
- **팀원 권한**: 팀 일정 조회(Read Only), 일정 변경 요청은 채팅을 통해서만 가능

### 일정 관리

- 모든 팀 일정은 팀원 전체에게 공개
- **일정 충돌 정의**: 동일 팀원이 참여하는 일정 간 시간 겹침
  - 충돌 조건: (시작시간A < 종료시간B) AND (시작시간B < 종료시간A) AND (참가자 교집합 존재)
  - 충돌 감지 시 사전 알림 제공 및 해결 요구
- 일정 변경 시 관련 팀원에게 자동 알림

### 채팅 시스템

- 날짜별 채팅 이력 분리 관리
- 일정 관련 요청은 해당 날짜 채팅에 기록
- **실시간 메시지 전달**: 1초 이내 메시지 전달 보장
- 메시지 읽음 상태 및 전달 확인 기능 제공

### 인증 & 접근제어

- 모든 기능 이용 전 사용자 인증 필수
- 팀 소속 확인 후 해당 팀 일정/채팅 접근 허용

## 4. 주요 비즈니스 프로세스

### 일정 생성 프로세스

1. 팀장이 새 일정 생성
2. 참가자 지정 및 일정 충돌 검사
3. 팀 캘린더에 일정 등록

### 일정 변경 요청 프로세스

1. 팀원이 해당 날짜 채팅에 변경 요청
2. 팀장이 채팅 확인 후 일정 수정
3. 업데이트된 일정 반영

### 일정 조회 프로세스

- 월/주/일 단위 캘린더 뷰 제공
- 팀 전체 일정 통합 표시
- 개인별 관련 일정 하이라이트

## 5. 시스템 성능 및 제약 조건

### 성능 요구사항

- **응답 시간**
  - 일정 조회: 2초 이내
  - 채팅 메시지 전달: 1초 이내
  - 일정 생성/수정: 3초 이내
- **동시 사용자**: 팀당 최대 50명 동시 접속 지원
- **메시지 처리 용량**: 분당 1,000개 메시지 처리

### 데이터 제약 조건

- **사용자**
  - 이름: 2-30자
  - 이메일: 유효한 이메일 형식 필수
- **팀**
  - 팀명: 2-30자
  - 팀원 수: 최소 2명, 최대 50명
- **일정**
  - 제목: 2-100자
  - 내용: 최대 1,000자
  - 일정 기간: 최대 7일
- **채팅**
  - 메시지 내용: 최대 500자
  - 파일 첨부: 최대 10MB

## 6. 예외 상황 처리

### 시스템 오류 대응

- **네트워크 오류**: 오프라인 모드 지원으로 일정 조회 및 임시 메시지 저장
- **서버 장애**: 자동 복구 및 데이터 백업 복원
- **동시 접근 충돌**: 낙관적 잠금을 통한 일정 수정 충돌 해결

### 비즈니스 예외 처리

- **팀장 부재**: 부팀장 권한 자동 위임 또는 관리자 개입
- **일정 충돌**: 자동 감지 후 대안 시간 제안 및 조정 요청
- **메시지 전달 실패**: 재전송 및 오프라인 사용자 대기열 관리

### 보안 예외 처리

- **무단 접근**: 세션 만료 및 강제 로그아웃
- **권한 위반**: 접근 차단 및 감사 로그 기록
- **비정상 활동**: 계정 임시 잠금 및 관리자 알림

## 7. 핵심 가치 제안

- **중앙화된 팀 일정 관리**: 흩어진 일정 정보의 통합
- **실시간 소통 연결**: 일정과 대화의 맥락적 연결
- **역할 기반 협업**: 팀장 중심의 체계적 일정 관리
- **투명한 팀 운영**: 모든 팀원이 팀 일정을 실시간 공유
